<html>
    <head>
        <title>
            one-time-chat
        </title>
        <link rel="stylesheet" href="styles.css">
        <script src="/socket.io/socket.io.js"></script>
    </head>
    <body>
        <div id="main_container" class="container">
            <div id="chat">
            </div>
            
            <div id="chat_reply">
                <div id="reply_box" class="center">
                    <textarea id="reply" rows="1"></textarea>
                </div>
                
                <div id="send_box" class="center">
                    <button id="send">send</button>
                </div>
            </div>
        </div>
        
        <script>
            const chat = document.getElementById('chat');
            const reply = document.getElementById('reply');
            const send = document.getElementById('send');
            
            const displayMessage = (text, dir='out') => {
                const currentTime = new Date();
                const timeString = currentTime.getHours() + ':' + currentTime.getMinutes();
                
                let ownMessage =    `<div class="message msg_${dir}">
                    <div class="msg">
                        ${text}
                        </div>
                        <div class="msg_meta">
                            ${timeString}
                            </div>
                            </div>`
                            
                            chat.innerHTML += ownMessage;
                            chat.scrollTop = chat.scrollHeight;
            }
        </script>
        
        <script src="index.js"></script>

        <script>
            window.onload = () => {
                send.onclick = () => {
                    text = reply.value;
                    reply.value = '';
                    if(text !== '')
                    {
                        sendMessage(text);
                    }
                };
                reply.addEventListener("keyup", (event) => {
                    if(event.key === 'Enter')
                    {
                        send.click();
                    }
                })
            };
        </script>
    </body>
    </html>